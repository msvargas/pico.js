(this.webpackJsonpwebcam=this.webpackJsonpwebcam||[]).push([[0],{12:function(e,t,n){},14:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(5),c=n.n(l),o=(n(12),n(2)),i=n.n(o),u=n(3),s=n(6),m=(n(14),n(1)),p=n.n(m);var d=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(null);return Object(a.useEffect)((function(){function a(){return(a=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.a.initialized){e.next=4;break}return e.next=3,p.a.load();case 3:console.log("pico loaded succesfull!");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var r;!function(){a.apply(this,arguments)}();var l=document.getElementsByTagName("canvas")[0].getContext("2d"),c=m.defaultSizeImage;n.current=new m.Camvas((function(n,a){l.drawImage(n,0,0);var o=l.getImageData(0,0,640,480).data;c.pixels=Object(m.rgba_to_grayscale)(o,480,640);var i=p.a.run_cascade(c,m.facefinder_classify_region,m.defaultParams);for(i=Object(m.update_memory)(i),i=p.a.cluster_detections(i,.3),r=0;r<i.length;++r)if(i[r][3]>50){var s,d,h,v=.5*i[r][2];if(l.beginPath(),"circle"===e.current.value?l.arc(i[r][1],i[r][0],v,0,2*Math.PI,!1):l.rect(i[r][1]-v,i[r][0]-v,i[r][2],i[r][2]),l.lineWidth=4,l.strokeStyle="royalblue",l.stroke(),!t.current.checked)continue;s=i[r][0]-.075*i[r][2],d=i[r][1]-.175*i[r][2],h=.35*i[r][2];var f=Object(m.do_puploc)(s,d,h,127,c),E=Object(u.a)(f,2);s=E[0],d=E[1],s>=0&&d>=0&&(l.beginPath(),l.arc(d,s,2,0,2*Math.PI,!1),l.lineWidth=3,l.strokeStyle="limegreen",l.stroke()),s=i[r][0]-.075*i[r][2],d=i[r][1]+.175*i[r][2],h=.35*i[r][2];var b=Object(m.do_puploc)(s,d,h,127,c),g=Object(u.a)(b,2);s=g[0],d=g[1],s>=0&&d>=0&&(l.beginPath(),l.arc(d,s,2,0,2*Math.PI,!1),l.lineWidth=3,l.strokeStyle="limegreen",l.stroke())}}));var o=function(e){console.log("".concat((new Date).toLocaleString()," Camera canvas ").concat(e.type," event..."))};return n.current.video.addEventListener("play",o),n.current.video.addEventListener("pause",o),function(){n.current.video.removeEventListener("play",o),n.current.video.removeEventListener("pause",o),n.current=null}}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("hr",null),r.a.createElement("section",null,r.a.createElement("h3",null,"Using pico.js and lploc.js for real-time localization of eye pupils"),r.a.createElement("p",null,"Click the button below and allow the page to access your webcam."),r.a.createElement("p",null,r.a.createElement("b",null,"All the processing is done on the client side, i.e., without sending images to a server.")),r.a.createElement("p",null,"Original example: More information about the algotihm is available"," ",r.a.createElement("a",{href:"https://tehnokv.com/posts/puploc-with-trees/demo/"},"here"),".")),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",ref:t,defaultChecked:!0}),"with pupils"),r.a.createElement("select",{name:"shape",ref:e},r.a.createElement("option",{value:"shape"},"Square"),r.a.createElement("option",{value:"circle"},"Circle")))),r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("input",{type:"button",value:"Start",onClick:function(){return n.current.play()}}),r.a.createElement("span",null,"  "),r.a.createElement("input",{type:"button",value:"Pause",onClick:function(){return n.current.pause()}}),r.a.createElement("span",null,"  "),r.a.createElement("input",{type:"button",value:"Stop",onClick:function(){return n.current.stop()}}))),r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("canvas",{width:"640",height:"480"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(d,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,t,n){e.exports=n(22)}},[[7,1,2]]]);
//# sourceMappingURL=main.680afe28.chunk.js.map