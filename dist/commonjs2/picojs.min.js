module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultSizeImage={nrows:480,ncols:640,ldim:640},e.defaultParams={shiftfactor:.1,minsize:100,maxsize:1e3,scalefactor:1.1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.callback=t,this._raId=0,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,this.callback=t;var e=document.createElement("div");this.videoEl=document.createElement("video"),this.videoEl.setAttribute("autoplay","1"),this.videoEl.setAttribute("playsinline","1"),this.videoEl.setAttribute("width","1"),this.videoEl.setAttribute("height","1"),e.appendChild(this.videoEl),document.body.appendChild(e)}return Object.defineProperty(t.prototype,"started",{get:function(){return!this.videoEl.paused},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"video",{get:function(){return this.videoEl},enumerable:!0,configurable:!0}),t.prototype.play=function(t){var e=this;return void 0===t&&(t={video:!0,audio:!1}),new Promise((function(n,r){e.videoEl.srcObject?e.videoEl.paused?e.videoEl.play().then((function(){return e.update()})).then(n):n():navigator.mediaDevices.getUserMedia(t).then((function(t){e.videoEl.srcObject=t,e.update(),n(t)}),r)}))},t.prototype.stop=function(){this.videoEl&&this.videoEl.srcObject&&(this.pause(),this.videoEl.srcObject.getTracks().forEach((function(t){return t.stop()})),this.videoEl.srcObject=null)},t.prototype.pause=function(){this.videoEl.pause()},t.prototype.update=function(){var t=this;if(this.callback){var e=Date.now(),n=function(){if(t.videoEl.paused||t.videoEl.ended||!t.callback)return t._raId&&cancelAnimationFrame(t._raId),void(t._raId=0);var r=Date.now()-e;t.callback(t.videoEl,r),e=Date.now(),t._raId=requestAnimationFrame(n)};this._raId=requestAnimationFrame(n)}},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(3)),o=n(1);e.Camvas=o.default;var a=n(6);e.VideoCapture=a.default,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(4);e.pico=i.pico;var o=n(5);function a(t){return void 0===t&&(t="facefinder.bin"),e.fetchBinary(e._baseUri+t).then((function(t){e.facefinder_classify_region=i.pico.unpack_cascade(t),e.loaded.faceFinder=!0}))}function s(t){return void 0===t&&(t="puploc.bin"),e.fetchBinary(e._baseUri+t).then((function(t){e.do_puploc=o.lploc.unpack_localizer(t),e.loaded.pupilFinder=!0}))}e.lploc=o.lploc,e.loaded={faceFinder:!1,pupilFinder:!1},e.fetchBinary=function(t){return fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){return new Int8Array(t)}))},e._baseUri="https://raw.githubusercontent.com/punisher97/pico.js/master/bin/",e.rgba_to_grayscale=function(t,e,n){for(var r=new Uint8Array(e*n),i=0;i<e;++i)for(var o=0;o<n;++o)r[i*n+o]=(2*t[4*i*n+4*o+0]+7*t[4*i*n+4*o+1]+1*t[4*i*n+4*o+2])/10;return r},e.update_memory=i.pico.instantiate_detection_memory(5),e.facefinder_classify_region=function(t,e,n,r,i){return-1},e.do_puploc=function(t,e,n,r,i){return[-1,-1,NaN,NaN]},e.loadFaceFinder=a,e.loadPupilFinder=s,e.load=function(t){return t&&(e._baseUri=t),Promise.all([a(),s()])};var c=function(t,e,n,r){this.pixels=t,this.nrows=e,this.ncols=n,this.ldim=r};e.PicoImage=c;var u=function(t,e,n,i){void 0===t&&(t=r.defaultParams),void 0===e&&(e=!0),void 0===n&&(n=50),void 0===i&&(i=.2),this.params=t,this.withPupils=e,this.threshold=n,this.iouthreshold=i};e.FacePupilOptions=u,e.defaultOptions=new u,e.detect=function(t,n,r){var o,a;void 0===r&&(r=e.defaultOptions);var s=i.pico.run_cascade(n,e.facefinder_classify_region,r.params);s=e.update_memory(s),s=i.pico.cluster_detections(s,r.iouthreshold);for(var c=0;c<s.length;++c)if(s[c][3]>r.threshold){var u,l,d;t.beginPath(),t.arc(s[c][1],s[c][0],s[c][2]/2,0,2*Math.PI,!1),t.lineWidth=3,t.strokeStyle="red",t.stroke(),r.withPupils&&(u=s[c][0]-.075*s[c][2],l=s[c][1]-.175*s[c][2],d=.35*s[c][2],u=(o=e.do_puploc(u,l,d,63,n))[0],l=o[1],u>=0&&l>=0&&(t.beginPath(),t.arc(l,u,1,0,2*Math.PI,!1),t.lineWidth=3,t.strokeStyle="red",t.stroke()),u=s[c][0]-.075*s[c][2],l=s[c][1]+.175*s[c][2],d=.35*s[c][2],u=(a=e.do_puploc(u,l,d,63,n))[0],l=a[1],u>=0&&l>=0&&(t.beginPath(),t.arc(l,u,1,0,2*Math.PI,!1),t.lineWidth=3,t.strokeStyle="red",t.stroke()))}return s}},function(t,e){var n={unpack_cascade:function(t){const e=new DataView(new ArrayBuffer(4));let n=8;e.setUint8(0,t[n+0]),e.setUint8(1,t[n+1]),e.setUint8(2,t[n+2]),e.setUint8(3,t[n+3]);const r=e.getInt32(0,!0);n+=4,e.setUint8(0,t[n+0]),e.setUint8(1,t[n+1]),e.setUint8(2,t[n+2]),e.setUint8(3,t[n+3]);const i=e.getInt32(0,!0);n+=4;const o=[],a=[],s=[];for(let c=0;c<i;++c){Array.prototype.push.apply(o,[0,0,0,0]),Array.prototype.push.apply(o,t.slice(n,n+4*Math.pow(2,r)-4)),n=n+4*Math.pow(2,r)-4;for(let i=0;i<Math.pow(2,r);++i)e.setUint8(0,t[n+0]),e.setUint8(1,t[n+1]),e.setUint8(2,t[n+2]),e.setUint8(3,t[n+3]),a.push(e.getFloat32(0,!0)),n+=4;e.setUint8(0,t[n+0]),e.setUint8(1,t[n+1]),e.setUint8(2,t[n+2]),e.setUint8(3,t[n+3]),s.push(e.getFloat32(0,!0)),n+=4}const c=new Int8Array(o),u=new Float32Array(a),l=new Float32Array(s);return function(t,e,n,o,a){t*=256,e*=256;let s=0,d=0;const f=Math.pow(2,r)>>0;for(let p=0;p<i;++p){idx=1;for(let i=0;i<r;++i)idx=2*idx+(o[(t+c[s+4*idx+0]*n>>8)*a+(e+c[s+4*idx+1]*n>>8)]<=o[(t+c[s+4*idx+2]*n>>8)*a+(e+c[s+4*idx+3]*n>>8)]);if((d+=u[f*p+idx-f])<=l[p])return-1;s+=4*f}return d-l[i-1]}},run_cascade:function(t,e,n){const r=t.pixels,i=t.nrows,o=t.ncols,a=t.ldim,s=n.shiftfactor,c=n.minsize,u=n.maxsize,l=n.scalefactor;let d=c;const f=[];for(;d<=u;){const t=Math.max(s*d,1)>>0,n=d/2+1>>0;for(let s=n;s<=i-n;s+=t)for(let i=n;i<=o-n;i+=t){const t=e(s,i,d,r,a);t>0&&f.push([s,i,d,t])}d*=l}return f},cluster_detections:function(t,e){function n(t,e){const n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],c=Math.max(0,Math.min(n+i/2,o+s/2)-Math.max(n-i/2,o-s/2)),u=Math.max(0,Math.min(r+i/2,a+s/2)-Math.max(r-i/2,a-s/2));return c*u/(i*i+s*s-c*u)}t=t.sort((function(t,e){return e[3]-t[3]}));const r=new Array(t.length).fill(0),i=[];for(let o=0;o<t.length;++o)if(0==r[o]){let a=0,s=0,c=0,u=0,l=0;for(let i=o;i<t.length;++i)n(t[o],t[i])>e&&(r[i]=1,a+=t[i][0],s+=t[i][1],c+=t[i][2],u+=t[i][3],l+=1);i.push([a/l,s/l,c/l,u])}return i},instantiate_detection_memory:function(t){let e=0;const n=[];for(let e=0;e<t;++e)n.push([]);return function(t){for(n[e]=t,e=(e+1)%n.length,t=[],i=0;i<n.length;++i)t=t.concat(n[i]);return t}}};e.pico=n},function(t,e){var n={unpack_localizer:function(t){const e=new DataView(new ArrayBuffer(4));let n=0;e.setUint8(0,t[n+0]),e.setUint8(1,t[n+1]),e.setUint8(2,t[n+2]),e.setUint8(3,t[n+3]);const r=e.getInt32(0,!0);n+=4,e.setUint8(0,t[n+0]),e.setUint8(1,t[n+1]),e.setUint8(2,t[n+2]),e.setUint8(3,t[n+3]);const i=e.getFloat32(0,!0);n+=4,e.setUint8(0,t[n+0]),e.setUint8(1,t[n+1]),e.setUint8(2,t[n+2]),e.setUint8(3,t[n+3]);const o=e.getInt32(0,!0);n+=4,e.setUint8(0,t[n+0]),e.setUint8(1,t[n+1]),e.setUint8(2,t[n+2]),e.setUint8(3,t[n+3]);const a=e.getInt32(0,!0);n+=4;const s=[],c=[];for(let i=0;i<r;++i)for(let r=0;r<o;++r){Array.prototype.push.apply(s,t.slice(n,n+4*Math.pow(2,a)-4)),n=n+4*Math.pow(2,a)-4;for(let r=0;r<Math.pow(2,a);++r)for(let r=0;r<2;++r)e.setUint8(0,t[n+0]),e.setUint8(1,t[n+1]),e.setUint8(2,t[n+2]),e.setUint8(3,t[n+3]),c.push(e.getFloat32(0,!0)),n+=4}const u=new Int8Array(s),l=new Float32Array(c);function d(t,e,n,s,c,d,f){let p=0;const h=Math.pow(2,a)>>0;for(let y=0;y<r;++y){let r=0,m=0;for(let i=0;i<o;++i){let _=0;for(var v=0;v<a;++v){const r=Math.min(c-1,Math.max(0,256*t+u[p+4*_+0]*n>>8)),i=Math.min(d-1,Math.max(0,256*e+u[p+4*_+1]*n>>8)),o=Math.min(c-1,Math.max(0,256*t+u[p+4*_+2]*n>>8)),a=Math.min(d-1,Math.max(0,256*e+u[p+4*_+3]*n>>8));_=2*_+1+(s[r*f+i]>s[o*f+a])}const b=2*(o*h*y+h*i+_-(h-1));r+=l[b+0],m+=l[b+1],p+=4*h-4}t+=r*n,e+=m*n,n*=i}return[t,e]}return function(t,e,n,r,i){const o=[],a=[];for(let s=0;s<r;++s){const r=n*(.925+.15*Math.random());let s=t+.15*n*(.5-Math.random()),c=e+.15*n*(.5-Math.random());[s,c]=d(s,c,r,i.pixels,i.nrows,i.ncols,i.ldim),o.push(s),a.push(c)}return o.sort(),a.sort(),[o[Math.round(r/2)],a[Math.round(r/2)]]}}};e.lploc=n},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(1)),s=n(0),c=function(t){function e(e,n){var r=t.call(this)||this;if(r.canvas=e,r.src=n,r.width=s.defaultSizeImage.ncols,r.height=s.defaultSizeImage.nrows,r.callback=function(t,e){},r.ctx=e.getContext("2d"),!r.ctx)throw new Error("Fail to get canvas context");if(n&&"string"!=typeof n){if(n.video)try{r.width=n.video.width,r.height=n.video.height}catch(t){}r.play(n)}return r}return i(e,t),e}(a.default);e.default=c}]);